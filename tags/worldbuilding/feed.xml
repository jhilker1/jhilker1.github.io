<?xml version="1.0" encoding="utf-8" standalone="yes"?><rss version="2.0" xmlns:atom="http://www.w3.org/2005/Atom"><channel><title>Worldbuilding</title><link>/tags/worldbuilding/</link><description>Recent content in Worldbuilding on Jacob's Website</description><generator>Hugo -- gohugo.io</generator><language>en-us</language><lastBuildDate>Mon, 14 Jun 2021 22:43:00 -0400</lastBuildDate><atom:link href="/tags/worldbuilding/feed.xml" rel="self" type="application/rss+xml"/><item><title>Building Hydras for Org-roam</title><link>https://jhilker.com/blog/2021/06/building-hydras-for-org-roam/</link><pubDate>Mon, 14 Jun 2021 22:43:00 -0400</pubDate><guid>/blog/2021/06/building-hydras-for-org-roam/</guid><description>&lt;p>I&amp;rsquo;ve recently been playing around with &lt;a href="https://github.com/org-roam/org-roam">Org-roam&lt;/a>, a note-taking package for Emacs and Org-mode based on the &lt;a href="https://en.wikipedia.org/wiki/Zettelkasten">Zettelkasten&lt;/a> method of taking notes, and interconnecting those notes by means of backlinks, and one place this style of note-taking is very common on is the &lt;a href="https://roamresearch.com">Roam Research&lt;/a> website. In the little bit of time that I&amp;rsquo;ve gotten to try this line of research, I&amp;rsquo;ve found it much more helpful with regards to actually remembering things rather than my old method of just writing it down in a notebook - having backlinks where I can go back and reference any information I&amp;rsquo;ve gotten is very helpful. Despite my love of this way of keeping myself organized, I wanted to be able to quickly capture ideas for any worldbuilding ideas I had - something which I feel like would fall into one of the worldbuilding wikis I maintain for myself, rather than the notes I use by default (for things such as software or any books I&amp;rsquo;ve read). I wanted to try and do more with Emacs-lisp, and so I found that trying to write a hydra for it might be a good place to start. Although I had found that the idea in the documentation of creating a &lt;code>.dir-locals.el&lt;/code> in the directory where I needed a roam database was a good place to start, I found that it ultimately forced me to have to be in that directory to capture an idea if I suddenly came up with one, which I feel like sort of goes against the entire workflow I have set up at this point. I knew that I needed to do three things with my &amp;ldquo;Roam hydra&amp;rdquo;:&lt;/p>
&lt;ul>
&lt;li>quickly capture ideas for my worldbuilding projects.&lt;/li>
&lt;li>insert links to those files in any other wiki files, if I had to.&lt;/li>
&lt;li>quickly find files for the wiki, if I needed to update them.&lt;/li>
&lt;/ul>
&lt;p>And so, I decided to set up my first hydra for finding files. I figured I didn&amp;rsquo;t want to set one up where I could add a file, but finding a file seemed like a good place to start.&lt;/p>
&lt;h2 id="the-base-hydra-finding-files">The Base Hydra - Finding Files&lt;/h2>
&lt;p>I figured fairly early on that once I had one function and hydra down, I would effectively have all three down, but I would just need to update the function I needed to call (such as &lt;code>org-roam-node-find&lt;/code> or &lt;code>org-roam-capture&lt;/code>). I started by looking over the code from the excellent blog post on &lt;a href="https://mollermara.com/blog/Fast-refiling-in-org-mode-with-hydras/">refiling Org-mode items with a hydra&lt;/a>. Spoilers - I&amp;rsquo;m not very good at Elisp, so when I saw his macro with all the backticks and commas, I found it fairly hard to follow along, at least until I found a cheatsheet for elisp earlier today. I first overwrote the function with a simple &lt;code>(let*)&lt;/code> before I called &lt;code>org-roam-find-file&lt;/code> and ran it in a simple scratch buffer. I was using the wiki I have for my alt-history setting &lt;a href="https://brokenthrones.jhilker.com">Broken Thrones&lt;/a> as an example, since that has become one of my main passion projects in my off-time, but feel free to use any hugo-site with &lt;a href="https://github.com/kaushalmodi/ox-hugo">Ox-Hugo&lt;/a> set up as an example. I am using a directory called &lt;code>content-org&lt;/code> in that hugo site, but use whatever you want.&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;span class="lnt">3
&lt;/span>&lt;span class="lnt">4
&lt;/span>&lt;span class="lnt">5
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-emacs-lisp" data-lang="emacs-lisp">&lt;span class="p">(&lt;/span>&lt;span class="nb">defun&lt;/span> &lt;span class="nv">jh/find-org-roam-file&lt;/span> &lt;span class="p">(&lt;/span>&lt;span class="nv">directory&lt;/span>&lt;span class="p">)&lt;/span>
&lt;span class="s">&amp;#34;Sets the org-roam directory and database and finds file.&amp;#34;&lt;/span>
&lt;span class="p">(&lt;/span>&lt;span class="nb">let*&lt;/span> &lt;span class="p">((&lt;/span>&lt;span class="nv">org-roam-directory&lt;/span> &lt;span class="p">(&lt;/span>&lt;span class="nf">concat&lt;/span> &lt;span class="nv">directory&lt;/span> &lt;span class="s">&amp;#34;content-org/&amp;#34;&lt;/span>&lt;span class="p">))&lt;/span>
&lt;span class="p">(&lt;/span>&lt;span class="nv">org-roam-db-location&lt;/span> &lt;span class="p">(&lt;/span>&lt;span class="nf">concat&lt;/span> &lt;span class="nv">directory&lt;/span> &lt;span class="s">&amp;#34;org-roam.db&amp;#34;&lt;/span>&lt;span class="p">)))&lt;/span>
&lt;span class="p">(&lt;/span>&lt;span class="nv">org-roam-node-find&lt;/span>&lt;span class="p">)))&lt;/span>
&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>After evaluating that in a scratch buffer, now I knew that I had enough for a basic hydra. Here is my final configuration for this base hydra after I did some UI tweaks for the help menu, but if anything the UI isn&amp;rsquo;t as important as functionality, at least when first setting it up.&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt"> 1
&lt;/span>&lt;span class="lnt"> 2
&lt;/span>&lt;span class="lnt"> 3
&lt;/span>&lt;span class="lnt"> 4
&lt;/span>&lt;span class="lnt"> 5
&lt;/span>&lt;span class="lnt"> 6
&lt;/span>&lt;span class="lnt"> 7
&lt;/span>&lt;span class="lnt"> 8
&lt;/span>&lt;span class="lnt"> 9
&lt;/span>&lt;span class="lnt">10
&lt;/span>&lt;span class="lnt">11
&lt;/span>&lt;span class="lnt">12
&lt;/span>&lt;span class="lnt">13
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-emacs-lisp" data-lang="emacs-lisp">&lt;span class="p">(&lt;/span>&lt;span class="nv">defhydra&lt;/span> &lt;span class="nv">jh/find-org-roam-file-hydra&lt;/span> &lt;span class="p">(&lt;/span>&lt;span class="nb">:hint&lt;/span> &lt;span class="no">nil&lt;/span> &lt;span class="nb">:exit&lt;/span> &lt;span class="no">t&lt;/span>&lt;span class="p">)&lt;/span>
&lt;span class="s">&amp;#34;
&lt;/span>&lt;span class="s">^Default^ ^Conworlds^ ^Campaigns^
&lt;/span>&lt;span class="s">^^^^^^^^------------------------------------------------------------
&lt;/span>&lt;span class="s">_d_: Default _b_: Broken Thrones _e_: Ere Break of Day
&lt;/span>&lt;span class="s">_q_: Quit _s_: Shattered Skies ^ ^
&lt;/span>&lt;span class="s">&amp;#34;&lt;/span>
&lt;span class="p">(&lt;/span>&lt;span class="s">&amp;#34;d&amp;#34;&lt;/span> &lt;span class="p">(&lt;/span>&lt;span class="nv">jh/find-org-roam-file&lt;/span> &lt;span class="s">&amp;#34;~/org/roam/&amp;#34;&lt;/span>&lt;span class="p">))&lt;/span>
&lt;span class="p">(&lt;/span>&lt;span class="s">&amp;#34;b&amp;#34;&lt;/span> &lt;span class="p">(&lt;/span>&lt;span class="nv">jh/find-org-roam-file&lt;/span> &lt;span class="s">&amp;#34;~/Projects/conworlds/brokenThrones/&amp;#34;&lt;/span>&lt;span class="p">))&lt;/span>
&lt;span class="p">(&lt;/span>&lt;span class="s">&amp;#34;s&amp;#34;&lt;/span> &lt;span class="p">(&lt;/span>&lt;span class="nv">jh/find-org-roam-file&lt;/span> &lt;span class="s">&amp;#34;~/Projects/conworlds/shatteredSkies/&amp;#34;&lt;/span>&lt;span class="p">))&lt;/span>
&lt;span class="p">(&lt;/span>&lt;span class="s">&amp;#34;e&amp;#34;&lt;/span> &lt;span class="p">(&lt;/span>&lt;span class="nv">jh/find-org-roam-file&lt;/span> &lt;span class="s">&amp;#34;~/Projects/campaigns/mirkwoodCampaign/&amp;#34;&lt;/span>&lt;span class="p">))&lt;/span>
&lt;span class="p">(&lt;/span>&lt;span class="s">&amp;#34;q&amp;#34;&lt;/span> &lt;span class="no">nil&lt;/span>&lt;span class="p">))&lt;/span>
&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>Once I had that, I knew I could just replace &lt;code>org-roam-find-file&lt;/code> with &lt;code>org-roam-capture&lt;/code> or whatever I needed to call. Although I am reusing a lot of code for this, in time I will try to clean it up. If you need the other hydras I use on a daily basis for roam notes, here they are.&lt;/p>
&lt;p>To actually use the hydra, bind &lt;code>jh/find-org-roam-file-hydra/body&lt;/code> to a keybinding (I use &lt;code>SPC n r f&lt;/code>) in my configs for both vanilla Emacs and Doom Emacs, and you should be set.&lt;/p>
&lt;h2 id="capturing-hydra">Capturing Hydra&lt;/h2>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt"> 1
&lt;/span>&lt;span class="lnt"> 2
&lt;/span>&lt;span class="lnt"> 3
&lt;/span>&lt;span class="lnt"> 4
&lt;/span>&lt;span class="lnt"> 5
&lt;/span>&lt;span class="lnt"> 6
&lt;/span>&lt;span class="lnt"> 7
&lt;/span>&lt;span class="lnt"> 8
&lt;/span>&lt;span class="lnt"> 9
&lt;/span>&lt;span class="lnt">10
&lt;/span>&lt;span class="lnt">11
&lt;/span>&lt;span class="lnt">12
&lt;/span>&lt;span class="lnt">13
&lt;/span>&lt;span class="lnt">14
&lt;/span>&lt;span class="lnt">15
&lt;/span>&lt;span class="lnt">16
&lt;/span>&lt;span class="lnt">17
&lt;/span>&lt;span class="lnt">18
&lt;/span>&lt;span class="lnt">19
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-emacs-lisp" data-lang="emacs-lisp">&lt;span class="p">(&lt;/span>&lt;span class="nb">defun&lt;/span> &lt;span class="nv">jh/org-roam-capture&lt;/span> &lt;span class="p">(&lt;/span>&lt;span class="nv">directory&lt;/span>&lt;span class="p">)&lt;/span>
&lt;span class="s">&amp;#34;Sets the org-roam directory and database and captures to file.&amp;#34;&lt;/span>
&lt;span class="p">(&lt;/span>&lt;span class="nb">let*&lt;/span> &lt;span class="p">((&lt;/span>&lt;span class="nv">org-roam-directory&lt;/span> &lt;span class="p">(&lt;/span>&lt;span class="nf">concat&lt;/span> &lt;span class="nv">directory&lt;/span> &lt;span class="s">&amp;#34;content-org/&amp;#34;&lt;/span>&lt;span class="p">))&lt;/span>
&lt;span class="p">(&lt;/span>&lt;span class="nv">org-roam-db-location&lt;/span> &lt;span class="p">(&lt;/span>&lt;span class="nf">concat&lt;/span> &lt;span class="nv">directory&lt;/span> &lt;span class="s">&amp;#34;org-roam.db&amp;#34;&lt;/span>&lt;span class="p">)))&lt;/span>
&lt;span class="p">(&lt;/span>&lt;span class="nv">org-roam-capture&lt;/span>&lt;span class="p">)))&lt;/span>
&lt;span class="p">(&lt;/span>&lt;span class="nv">defhydra&lt;/span> &lt;span class="nv">jh/org-roam-capture-hydra&lt;/span> &lt;span class="p">(&lt;/span>&lt;span class="nb">:hint&lt;/span> &lt;span class="no">nil&lt;/span> &lt;span class="nb">:exit&lt;/span> &lt;span class="no">t&lt;/span>&lt;span class="p">)&lt;/span>
&lt;span class="s">&amp;#34;
&lt;/span>&lt;span class="s">^Default^ ^Conworlds^ ^Campaigns^
&lt;/span>&lt;span class="s">^^^^^^^^------------------------------------------------------------
&lt;/span>&lt;span class="s">_d_: Default _b_: Broken Thrones _e_: Ere Break of Day
&lt;/span>&lt;span class="s">_q_: Quit _s_: Shattered Skies ^ ^
&lt;/span>&lt;span class="s">&amp;#34;&lt;/span>
&lt;span class="p">(&lt;/span>&lt;span class="s">&amp;#34;d&amp;#34;&lt;/span> &lt;span class="p">(&lt;/span>&lt;span class="nv">jh/org-roam-capture&lt;/span> &lt;span class="s">&amp;#34;~/org/roam/&amp;#34;&lt;/span>&lt;span class="p">))&lt;/span>
&lt;span class="p">(&lt;/span>&lt;span class="s">&amp;#34;b&amp;#34;&lt;/span> &lt;span class="p">(&lt;/span>&lt;span class="nv">jh/org-roam-capture&lt;/span> &lt;span class="s">&amp;#34;~/Projects/conworlds/brokenThrones/&amp;#34;&lt;/span>&lt;span class="p">))&lt;/span>
&lt;span class="p">(&lt;/span>&lt;span class="s">&amp;#34;s&amp;#34;&lt;/span> &lt;span class="p">(&lt;/span>&lt;span class="nv">jh/org-roam-capture&lt;/span> &lt;span class="s">&amp;#34;~/Projects/conworlds/shatteredSkies/&amp;#34;&lt;/span>&lt;span class="p">))&lt;/span>
&lt;span class="p">(&lt;/span>&lt;span class="s">&amp;#34;e&amp;#34;&lt;/span> &lt;span class="p">(&lt;/span>&lt;span class="nv">jh/org-roam-capture&lt;/span> &lt;span class="s">&amp;#34;~/Projects/campaigns/mirkwoodCampaign/&amp;#34;&lt;/span>&lt;span class="p">))&lt;/span>
&lt;span class="p">(&lt;/span>&lt;span class="s">&amp;#34;q&amp;#34;&lt;/span> &lt;span class="no">nil&lt;/span>&lt;span class="p">))&lt;/span>
&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;h2 id="insertion-hydra">Insertion Hydra&lt;/h2>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt"> 1
&lt;/span>&lt;span class="lnt"> 2
&lt;/span>&lt;span class="lnt"> 3
&lt;/span>&lt;span class="lnt"> 4
&lt;/span>&lt;span class="lnt"> 5
&lt;/span>&lt;span class="lnt"> 6
&lt;/span>&lt;span class="lnt"> 7
&lt;/span>&lt;span class="lnt"> 8
&lt;/span>&lt;span class="lnt"> 9
&lt;/span>&lt;span class="lnt">10
&lt;/span>&lt;span class="lnt">11
&lt;/span>&lt;span class="lnt">12
&lt;/span>&lt;span class="lnt">13
&lt;/span>&lt;span class="lnt">14
&lt;/span>&lt;span class="lnt">15
&lt;/span>&lt;span class="lnt">16
&lt;/span>&lt;span class="lnt">17
&lt;/span>&lt;span class="lnt">18
&lt;/span>&lt;span class="lnt">19
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-emacs-lisp" data-lang="emacs-lisp">&lt;span class="p">(&lt;/span>&lt;span class="nb">defun&lt;/span> &lt;span class="nv">jh/org-roam-insert&lt;/span> &lt;span class="p">(&lt;/span>&lt;span class="nv">directory&lt;/span>&lt;span class="p">)&lt;/span>
&lt;span class="s">&amp;#34;Sets the org-roam directory and database and inserts link to file.&amp;#34;&lt;/span>
&lt;span class="p">(&lt;/span>&lt;span class="nb">let*&lt;/span> &lt;span class="p">((&lt;/span>&lt;span class="nv">org-roam-directory&lt;/span> &lt;span class="p">(&lt;/span>&lt;span class="nf">concat&lt;/span> &lt;span class="nv">directory&lt;/span> &lt;span class="s">&amp;#34;content-org/&amp;#34;&lt;/span>&lt;span class="p">))&lt;/span>
&lt;span class="p">(&lt;/span>&lt;span class="nv">org-roam-db-location&lt;/span> &lt;span class="p">(&lt;/span>&lt;span class="nf">concat&lt;/span> &lt;span class="nv">directory&lt;/span> &lt;span class="s">&amp;#34;org-roam.db&amp;#34;&lt;/span>&lt;span class="p">)))&lt;/span>
&lt;span class="p">(&lt;/span>&lt;span class="nv">org-roam-node-insert&lt;/span>&lt;span class="p">)))&lt;/span>
&lt;span class="p">(&lt;/span>&lt;span class="nv">defhydra&lt;/span> &lt;span class="nv">jh/org-roam-insert-hydra&lt;/span> &lt;span class="p">(&lt;/span>&lt;span class="nb">:hint&lt;/span> &lt;span class="no">nil&lt;/span> &lt;span class="nb">:exit&lt;/span> &lt;span class="no">t&lt;/span>&lt;span class="p">)&lt;/span>
&lt;span class="s">&amp;#34;
&lt;/span>&lt;span class="s">^Default^ ^Conworlds^ ^Campaigns^
&lt;/span>&lt;span class="s">^^^^^^^^------------------------------------------------------------
&lt;/span>&lt;span class="s">_d_: Default _b_: Broken Thrones _e_: Ere Break of Day
&lt;/span>&lt;span class="s">_q_: Quit _s_: Shattered Skies ^ ^
&lt;/span>&lt;span class="s">&amp;#34;&lt;/span>
&lt;span class="p">(&lt;/span>&lt;span class="s">&amp;#34;d&amp;#34;&lt;/span> &lt;span class="p">(&lt;/span>&lt;span class="nv">jh/org-roam-insert&lt;/span> &lt;span class="s">&amp;#34;~/org/roam/&amp;#34;&lt;/span>&lt;span class="p">))&lt;/span>
&lt;span class="p">(&lt;/span>&lt;span class="s">&amp;#34;b&amp;#34;&lt;/span> &lt;span class="p">(&lt;/span>&lt;span class="nv">jh/org-roam-insert&lt;/span> &lt;span class="s">&amp;#34;~/Projects/conworlds/brokenThrones/&amp;#34;&lt;/span>&lt;span class="p">))&lt;/span>
&lt;span class="p">(&lt;/span>&lt;span class="s">&amp;#34;s&amp;#34;&lt;/span> &lt;span class="p">(&lt;/span>&lt;span class="nv">jh/org-roam-insert&lt;/span> &lt;span class="s">&amp;#34;~/Projects/conworlds/shatteredSkies/&amp;#34;&lt;/span>&lt;span class="p">))&lt;/span>
&lt;span class="p">(&lt;/span>&lt;span class="s">&amp;#34;e&amp;#34;&lt;/span> &lt;span class="p">(&lt;/span>&lt;span class="nv">jh/org-roam-insert&lt;/span> &lt;span class="s">&amp;#34;~/Projects/campaigns/mirkwoodCampaign/&amp;#34;&lt;/span>&lt;span class="p">))&lt;/span>
&lt;span class="p">(&lt;/span>&lt;span class="s">&amp;#34;q&amp;#34;&lt;/span> &lt;span class="no">nil&lt;/span>&lt;span class="p">))&lt;/span>
&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div></description></item></channel></rss>